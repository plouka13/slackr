{"ast":null,"code":"var _jsxFileName = \"/Users/plouka/Projects/slackr/frontend/src/components/Message/MessageEdit.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { IconButton } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport AuthContext from '../../AuthContext';\nimport { StepContext } from '../Channel/ChannelMessages';\n\nfunction MessageEdit({\n  message_id,\n  disabled = false\n}) {\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  step = step ? step : () => {}; // sanity check\n\n  const messageEdit = () => {\n    const message = prompt();\n    if (message === null) return; // basic validation\n\n    /**\n     * Empty message should delete original\n     */\n\n    if (message === \"\") {\n      axios.delete(`/message/remove`, {\n        data: {\n          token,\n          message_id\n        }\n      }).then(() => {\n        step();\n      });\n      return;\n    }\n    /**\n     * Default message edit behaviour\n     */\n\n\n    axios.put(`/message/edit`, {\n      token,\n      message_id,\n      message\n    }).then(() => {\n      step();\n    });\n  };\n\n  return React.createElement(IconButton, {\n    disabled: disabled,\n    onClick: messageEdit,\n    style: {\n      margin: 1\n    },\n    size: \"small\",\n    edge: \"end\",\n    \"aria-label\": \"delete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(EditIcon, {\n    fontSize: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }));\n}\n\nexport default MessageEdit;","map":{"version":3,"sources":["/Users/plouka/Projects/slackr/frontend/src/components/Message/MessageEdit.js"],"names":["React","axios","IconButton","EditIcon","AuthContext","StepContext","MessageEdit","message_id","disabled","token","useContext","step","messageEdit","message","prompt","delete","data","then","put","margin"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SACIC,UADJ,QAEO,mBAFP;AAIA,OAAOC,QAAP,MAAqB,yBAArB;AAEA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,SAAQC,WAAR,QAA0B,4BAA1B;;AAEA,SAASC,WAAT,CAAqB;AACjBC,EAAAA,UADiB;AAEjBC,EAAAA,QAAQ,GAAC;AAFQ,CAArB,EAGG;AAEC,QAAMC,KAAK,GAAGT,KAAK,CAACU,UAAN,CAAiBN,WAAjB,CAAd;AAEA,MAAIO,IAAI,GAAGX,KAAK,CAACU,UAAN,CAAiBL,WAAjB,CAAX;AACAM,EAAAA,IAAI,GAAGA,IAAI,GAAGA,IAAH,GAAU,MAAM,CAAE,CAA7B,CALD,CAKgC;;AAE/B,QAAMC,WAAW,GAAG,MAAM;AACtB,UAAMC,OAAO,GAAGC,MAAM,EAAtB;AACA,QAAID,OAAO,KAAK,IAAhB,EAAsB,OAFA,CAEQ;;AAE9B;;;;AAGA,QAAIA,OAAO,KAAK,EAAhB,EAAoB;AAChBZ,MAAAA,KAAK,CAACc,MAAN,CAAc,iBAAd,EAAgC;AAC5BC,QAAAA,IAAI,EAAE;AACFP,UAAAA,KADE;AAEFF,UAAAA;AAFE;AADsB,OAAhC,EAMCU,IAND,CAMM,MAAM;AACRN,QAAAA,IAAI;AACP,OARD;AASA;AACH;AAED;;;;;AAGAV,IAAAA,KAAK,CAACiB,GAAN,CAAW,eAAX,EAA2B;AACvBT,MAAAA,KADuB;AAEvBF,MAAAA,UAFuB;AAGvBM,MAAAA;AAHuB,KAA3B,EAKCI,IALD,CAKM,MAAM;AACRN,MAAAA,IAAI;AACP,KAPD;AAQH,GA/BD;;AAiCA,SACI,oBAAC,UAAD;AACI,IAAA,QAAQ,EAAEH,QADd;AAEI,IAAA,OAAO,EAAEI,WAFb;AAGI,IAAA,KAAK,EAAE;AAAEO,MAAAA,MAAM,EAAE;AAAV,KAHX;AAII,IAAA,IAAI,EAAC,OAJT;AAKI,IAAA,IAAI,EAAC,KALT;AAMI,kBAAW,QANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQI,oBAAC,QAAD;AAAU,IAAA,QAAQ,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,CADJ;AAYH;;AAED,eAAeb,WAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nimport {\n    IconButton,\n} from '@material-ui/core';\n\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport AuthContext from '../../AuthContext';\nimport {StepContext} from '../Channel/ChannelMessages';\n\nfunction MessageEdit({\n    message_id,\n    disabled=false,\n}) {\n\n    const token = React.useContext(AuthContext);\n\n    let step = React.useContext(StepContext);\n    step = step ? step : () => {}; // sanity check\n\n    const messageEdit = () => {\n        const message = prompt();\n        if (message === null) return; // basic validation\n\n        /**\n         * Empty message should delete original\n         */\n        if (message === \"\") {\n            axios.delete(`/message/remove`, {\n                data: {\n                    token,\n                    message_id,\n                }\n            })\n            .then(() => {\n                step();\n            });\n            return;\n        }\n\n        /**\n         * Default message edit behaviour\n         */\n        axios.put(`/message/edit`, {\n            token,\n            message_id,\n            message,\n        })\n        .then(() => {\n            step();\n        });\n    };\n\n    return (\n        <IconButton\n            disabled={disabled}\n            onClick={messageEdit}\n            style={{ margin: 1 }}\n            size=\"small\"\n            edge=\"end\"\n            aria-label=\"delete\"\n        >\n            <EditIcon fontSize=\"small\" />\n        </IconButton>\n    );\n}\n\nexport default MessageEdit;\n"]},"metadata":{},"sourceType":"module"}