{"ast":null,"code":"var _jsxFileName = \"/Users/plouka/Projects/slackr/frontend/src/components/Admin/SetUserPermissionsDialog.js\";\nimport React from \"react\";\nimport axios from 'axios';\nimport { Dialog, DialogTitle, DialogActions, DialogContent, DialogContentText, Button, TextField, Grid, FormControlLabel, RadioGroup, Radio, MenuItem, Select, InputLabel } from \"@material-ui/core\";\nimport AuthContext from \"../../AuthContext\";\nimport { PERMISSION_IDS } from \"../../utils/constants\";\n\nfunction SetUserPermissionsDialog({\n  children,\n  ...props\n}) {\n  const [open, setOpen] = React.useState(false);\n  const [permissionId, setPermissionId] = React.useState(PERMISSION_IDS.MEMBER);\n  const [users, setUsers] = React.useState([]);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const token = React.useContext(AuthContext);\n\n  function fetchUserData() {\n    axios.get('/users/all', {\n      params: {\n        token\n      }\n    }).then(({\n      data\n    }) => {\n      setUsers(data['users']);\n    }).catch(err => {});\n  }\n\n  React.useEffect(() => {\n    fetchUserData();\n  }, []);\n\n  const handleRadioChange = event => {\n    const newPermissionId = parseInt(event.target.value, 10);\n    setPermissionId(newPermissionId);\n  };\n\n  const handleUserSelect = event => {\n    const newUserId = parseInt(event.target.value, 10);\n    setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    if (!event.target[0].value) return;\n    const u_id = parseInt(event.target[0].value, 10);\n    const permission_id = parseInt(permissionId, 10);\n    axios.post(`/admin/userpermission/change`, {\n      token,\n      u_id,\n      permission_id\n    }).then(response => {\n      console.log(response);\n    }).catch(err => {});\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    onClick: handleClickOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, children), React.createElement(Dialog, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Set User Permissions\"), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(DialogContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(DialogContentText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Select a user below to set permissions for this user\"), React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    direction: \"row\",\n    justify: \"center\",\n    alignItems: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(Select, {\n    style: {\n      width: \"100%\"\n    },\n    id: \"u_id\",\n    onChange: handleUserSelect,\n    value: selectedUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, users.map((d, idx) => {\n    return React.createElement(MenuItem, {\n      key: d.u_id,\n      value: d.u_id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, d.name_first, \" \", d.name_last);\n  }))), React.createElement(Grid, {\n    container: true,\n    item: true,\n    justify: \"center\",\n    alignItems: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(RadioGroup, {\n    \"aria-label\": \"position\",\n    name: \"position\",\n    value: permissionId,\n    onChange: handleRadioChange,\n    row: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(FormControlLabel, {\n    value: PERMISSION_IDS.MEMBER,\n    control: React.createElement(Radio, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }),\n    label: \"Member\",\n    labelPlacement: \"bottom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(FormControlLabel, {\n    value: PERMISSION_IDS.OWNER,\n    control: React.createElement(Radio, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }),\n    label: \"Owner\",\n    labelPlacement: \"bottom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }))))), React.createElement(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: handleClose,\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: handleClose,\n    type: \"submit\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"Set\")))));\n}\n\nexport default SetUserPermissionsDialog;","map":{"version":3,"sources":["/Users/plouka/Projects/slackr/frontend/src/components/Admin/SetUserPermissionsDialog.js"],"names":["React","axios","Dialog","DialogTitle","DialogActions","DialogContent","DialogContentText","Button","TextField","Grid","FormControlLabel","RadioGroup","Radio","MenuItem","Select","InputLabel","AuthContext","PERMISSION_IDS","SetUserPermissionsDialog","children","props","open","setOpen","useState","permissionId","setPermissionId","MEMBER","users","setUsers","selectedUser","setSelectedUser","token","useContext","fetchUserData","get","params","then","data","catch","err","useEffect","handleRadioChange","event","newPermissionId","parseInt","target","value","handleUserSelect","newUserId","handleClickOpen","handleClose","handleSubmit","preventDefault","u_id","permission_id","post","response","console","log","width","map","d","idx","name_first","name_last","OWNER"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from 'axios';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  Button,\n  TextField,\n  Grid,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  MenuItem,\n  Select,\n  InputLabel,\n} from \"@material-ui/core\";\nimport AuthContext from \"../../AuthContext\";\nimport { PERMISSION_IDS } from \"../../utils/constants\";\n\nfunction SetUserPermissionsDialog({ children, ...props }) {\n\n    const [open, setOpen] = React.useState(false);\n    const [permissionId, setPermissionId] = React.useState(PERMISSION_IDS.MEMBER);\n    const [users, setUsers] = React.useState([]);\n    const [selectedUser, setSelectedUser] = React.useState('');\n    const token = React.useContext(AuthContext);\n\n    function fetchUserData() {\n    axios\n      .get('/users/all', {\n        params: {\n          token,\n        },\n      })\n      .then(({ data }) => {\n        setUsers(data['users']);\n      })\n      .catch((err) => {});\n     }\n\n    React.useEffect(() => {\n        fetchUserData();\n    }, []);\n\n\n    const handleRadioChange = event => {\n        const newPermissionId = parseInt(event.target.value,10);\n        setPermissionId(newPermissionId);\n    };\n\n    const handleUserSelect = event => {\n        const newUserId = parseInt(event.target.value,10);\n        setSelectedUser(newUserId);\n    };\n\n    function handleClickOpen() {\n        setOpen(true);\n    }\n\n    function handleClose() {\n        setOpen(false);\n    }\n\n    function handleSubmit(event) {\n        event.preventDefault();\n\n        if (!event.target[0].value) return;\n\n        const u_id = parseInt(event.target[0].value,10);\n        const permission_id = parseInt(permissionId,10);\n\n        axios\n        .post(`/admin/userpermission/change`, { token, u_id, permission_id })\n        .then(response => {\n            console.log(response);\n        })\n        .catch(err => {});\n    }\n\n    return <>\n        <div onClick={handleClickOpen}>\n        {children}\n        </div>\n        <Dialog\n            open={open}\n            onClose={handleClose}\n            aria-labelledby=\"form-dialog-title\"\n        >\n            <DialogTitle id=\"form-dialog-title\">Set User Permissions</DialogTitle>\n            <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <DialogContentText>\n                    Select a user below to set permissions for this user\n                    </DialogContentText>\n                    <Grid\n                        container\n                        spacing={2}\n                        direction=\"row\"\n                        justify=\"center\"\n                        alignItems=\"center\"\n                    >\n                        <Grid item xs={12}>\n                            <Select style={{width:\"100%\"}} id=\"u_id\" onChange={handleUserSelect} value={selectedUser}>\n                              {users.map((d, idx) => {\n                                return <MenuItem key={d.u_id} value={d.u_id}>{d.name_first} {d.name_last}</MenuItem>\n                              })}\n                            </Select>\n                        </Grid>\n                        <Grid container item justify=\"center\" alignItems=\"center\">\n                            <RadioGroup aria-label=\"position\" name=\"position\" value={permissionId} onChange={handleRadioChange} row>\n                                <FormControlLabel\n                                    value={PERMISSION_IDS.MEMBER}\n                                    control={<Radio color=\"primary\" />}\n                                    label=\"Member\"\n                                    labelPlacement=\"bottom\"\n                                />\n                                <FormControlLabel\n                                    value={PERMISSION_IDS.OWNER}\n                                    control={<Radio color=\"primary\" />}\n                                    label=\"Owner\"\n                                    labelPlacement=\"bottom\"\n                                />\n                            </RadioGroup>\n                        </Grid>\n                    </Grid>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\">\n                    Cancel\n                    </Button>\n                    <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n                    Set\n                    </Button>\n                </DialogActions>\n            </form>\n        </Dialog>\n    </>;\n}\n\nexport default SetUserPermissionsDialog;\n"]},"metadata":{},"sourceType":"module"}